{
  "openapi": "3.1.0",
  "info": {
    "title": "Restate Cloud API",
    "version": "v1"
  },
  "servers": [
    {
      "url": "https://api.dev.restate.cloud/cloud",
      "description": "Dev Endpoint"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "definitions": {
    "GetUserIdentityRequest": {
      "type": "object",
      "properties": {}
    },
    "ListAccountsRequest": {
      "type": "object",
      "properties": {}
    },
    "GetUserLimitsRequest": {
      "type": "object",
      "properties": {}
    },
    "CreateAccountRequest": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        }
      },
      "required": [
        "name"
      ]
    },
    "DeleteAccountRequest": {
      "type": "object",
      "properties": {
        "accountId": {
          "type": "string"
        }
      },
      "required": [
        "accountId"
      ]
    },
    "UpdateAccountRequest": {
      "type": "object",
      "properties": {
        "accountId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "accountId"
      ]
    },
    "AccountId": {
      "description": "Unique account identifier",
      "example": "acc_1b2DE3f40",
      "type": "string"
    },
    "DescribeAccountRequest": {
      "type": "object",
      "properties": {}
    },
    "CreateStripePortalSessionRequest": {
      "type": "object",
      "properties": {
        "returnUrl": {
          "type": "string"
        }
      }
    },
    "CreateEnvironmentRequest": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "region": {
          "type": "string"
        },
        "tierId": {
          "type": "string",
          "enum": [
            "FREE",
            "STARTER",
            "BUSINESS",
            "PREMIUM"
          ]
        },
        "payment": {
          "type": "object",
          "properties": {
            "successUrl": {
              "type": "string"
            },
            "cancelUrl": {
              "type": "string"
            }
          },
          "required": [
            "successUrl",
            "cancelUrl"
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "UpdateEnvironmentTierRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "tierId": {
          "type": "string",
          "enum": [
            "FREE",
            "STARTER",
            "BUSINESS",
            "PREMIUM"
          ]
        },
        "payment": {
          "type": "object",
          "properties": {
            "successUrl": {
              "type": "string"
            },
            "cancelUrl": {
              "type": "string"
            }
          },
          "required": [
            "successUrl",
            "cancelUrl"
          ]
        }
      },
      "required": [
        "environmentId",
        "tierId"
      ]
    },
    "GetAccountLimitsRequest": {
      "type": "object",
      "properties": {}
    },
    "ListEnvironmentsRequest": {
      "type": "object",
      "properties": {}
    },
    "DescribeEnvironmentRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        }
      },
      "required": [
        "environmentId"
      ]
    },
    "DestroyEnvironmentRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        }
      },
      "required": [
        "environmentId"
      ]
    },
    "CreateApiKeyRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "roleId": {
          "$ref": "#/components/schemas/RoleId"
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "environmentId",
        "roleId"
      ]
    },
    "RoleId": {
      "description": "A role identifier specifying a particular level of access for a principal.",
      "example": "rst:role::FullAccess",
      "type": "string",
      "enum": [
        "rst:role::FullAccess",
        "rst:role::IngressAccess",
        "rst:role::AdminAccess",
        "rst:role::CompleteAwakeableAccess",
        "rst:role::TunnelAccess"
      ]
    },
    "ListApiKeysRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        }
      },
      "required": [
        "environmentId"
      ]
    },
    "DescribeApiKeyRequest": {
      "type": "object",
      "properties": {
        "keyId": {
          "type": "string"
        },
        "environmentId": {
          "type": "string"
        }
      },
      "required": [
        "keyId",
        "environmentId"
      ]
    },
    "DeleteApiKeyRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "keyId": {
          "type": "string"
        }
      },
      "required": [
        "environmentId",
        "keyId"
      ]
    },
    "GetEnvironmentLogsRequest": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "start": {
          "type": "number",
          "minimum": 1700000000,
          "maximum": 2000000000
        },
        "end": {
          "type": "number",
          "minimum": 1700000000,
          "maximum": 2000000000
        }
      },
      "required": [
        "environmentId",
        "start",
        "end"
      ]
    },
    "ListAccountSecondaryOwnersRequest": {
      "type": "object",
      "properties": {}
    },
    "AddAccountSecondaryOwnerRequest": {
      "type": "object",
      "properties": {
        "secondaryOwnerUserId": {
          "type": "string"
        }
      },
      "required": [
        "secondaryOwnerUserId"
      ]
    },
    "RemoveAccountSecondaryOwnerRequest": {
      "type": "object",
      "properties": {
        "secondaryOwnerUserId": {
          "type": "string"
        }
      },
      "required": [
        "secondaryOwnerUserId"
      ]
    },
    "GetUserIdentityResponse": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "string"
        }
      },
      "required": [
        "userId"
      ],
      "additionalProperties": false
    },
    "ClientError": {
      "type": "object",
      "properties": {
        "code": {
          "type": "number"
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "code",
        "message"
      ],
      "additionalProperties": false
    },
    "UnauthorizedError": {
      "type": "object",
      "properties": {
        "code": {
          "type": "number"
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "code",
        "message"
      ],
      "additionalProperties": false
    },
    "ServerInternalError": {
      "type": "object",
      "properties": {
        "code": {
          "type": "number"
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "code",
        "message"
      ],
      "additionalProperties": false
    },
    "ListAccountsResponse": {
      "type": "object",
      "properties": {
        "accounts": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "accountId": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "ownershipType": {
                "type": "string",
                "enum": [
                  "OWNED",
                  "SECONDARY_OWNED"
                ]
              }
            },
            "required": [
              "accountId",
              "name"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "accounts"
      ],
      "additionalProperties": false
    },
    "GetUserLimitsResponse": {
      "type": "object",
      "properties": {
        "accounts": {
          "type": "object",
          "properties": {
            "usage": {
              "type": "number"
            },
            "limit": {
              "type": "number"
            }
          },
          "required": [
            "usage",
            "limit"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "accounts"
      ],
      "additionalProperties": false
    },
    "CreateAccountResponse": {
      "type": "object",
      "properties": {
        "accountId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "accountId",
        "name"
      ],
      "additionalProperties": false
    },
    "DeleteAccountResponse": {
      "type": "object",
      "properties": {
        "result": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "ok": {
                  "type": "boolean"
                }
              },
              "required": [
                "ok"
              ],
              "additionalProperties": false
            },
            {
              "type": "string"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "UpdateAccountResponse": {
      "type": "object",
      "properties": {
        "accountId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "ownershipType": {
          "type": "string",
          "enum": [
            "OWNED",
            "SECONDARY_OWNED"
          ]
        }
      },
      "required": [
        "accountId",
        "name"
      ],
      "additionalProperties": false
    },
    "DescribeAccountResponse": {
      "type": "object",
      "properties": {
        "environments": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "environmentId": {
                "type": "string"
              },
              "region": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "tierId": {
                "type": "string",
                "enum": [
                  "FREE",
                  "STARTER",
                  "BUSINESS",
                  "PREMIUM"
                ]
              }
            },
            "required": [
              "environmentId",
              "region",
              "name",
              "tierId"
            ],
            "additionalProperties": false
          }
        },
        "subscription": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "AWAITING_PAYMENT",
                "ACTIVE",
                "INACTIVE"
              ]
            },
            "currentPeriodStart": {
              "type": "number"
            },
            "currentPeriodEnd": {
              "type": "number"
            }
          },
          "required": [
            "status",
            "currentPeriodStart",
            "currentPeriodEnd"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "environments"
      ],
      "additionalProperties": false
    },
    "CreateStripePortalSessionResponse": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string"
        }
      },
      "required": [
        "url"
      ],
      "additionalProperties": false
    },
    "CreateEnvironmentResponse": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "checkoutUrl": {
          "type": "string"
        }
      },
      "required": [
        "environmentId",
        "name"
      ],
      "additionalProperties": false
    },
    "UpdateEnvironmentTierResponse": {
      "type": "object",
      "properties": {
        "checkoutUrl": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "GetAccountLimitsResponse": {
      "type": "object",
      "properties": {
        "freeEnvironments": {
          "type": "object",
          "properties": {
            "usage": {
              "type": "number"
            },
            "limit": {
              "type": "number"
            }
          },
          "required": [
            "usage",
            "limit"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "freeEnvironments"
      ],
      "additionalProperties": false
    },
    "ListEnvironmentsResponse": {
      "type": "object",
      "properties": {
        "environments": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "environmentId": {
                "type": "string"
              },
              "region": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "tierId": {
                "type": "string",
                "enum": [
                  "FREE",
                  "STARTER",
                  "BUSINESS",
                  "PREMIUM"
                ]
              }
            },
            "required": [
              "environmentId",
              "region",
              "name",
              "tierId"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "environments"
      ],
      "additionalProperties": false
    },
    "DescribeEnvironmentResponse": {
      "type": "object",
      "properties": {
        "environmentId": {
          "type": "string"
        },
        "region": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": [
            "PENDING",
            "ACTIVE",
            "FAILED",
            "DELETED"
          ]
        },
        "signingPublicKey": {
          "type": "string"
        },
        "apiKeys": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "keyId": {
                "type": "string"
              },
              "environmentId": {
                "type": "string"
              }
            },
            "required": [
              "keyId",
              "environmentId"
            ],
            "additionalProperties": false
          }
        },
        "ingressBaseUrl": {
          "type": "string"
        },
        "adminBaseUrl": {
          "type": "string"
        },
        "tunnelBaseUrl": {
          "type": "string"
        },
        "tunnelSrv": {
          "type": "string"
        },
        "proxyBaseUrl": {
          "type": "string"
        },
        "tierId": {
          "type": "string",
          "enum": [
            "FREE",
            "STARTER",
            "BUSINESS",
            "PREMIUM"
          ]
        }
      },
      "required": [
        "environmentId",
        "region",
        "name",
        "status",
        "signingPublicKey",
        "apiKeys",
        "ingressBaseUrl",
        "adminBaseUrl",
        "tunnelBaseUrl",
        "tunnelSrv",
        "proxyBaseUrl",
        "tierId"
      ],
      "additionalProperties": false
    },
    "DestroyEnvironmentResponse": {
      "type": "object",
      "properties": {
        "result": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "ok": {
                  "type": "boolean"
                }
              },
              "required": [
                "ok"
              ],
              "additionalProperties": false
            },
            {
              "type": "string"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "CreateApiKeyResponse": {
      "type": "object",
      "properties": {
        "keyId": {
          "type": "string"
        },
        "roleId": {
          "$ref": "#/components/schemas/RoleId"
        },
        "environmentId": {
          "type": "string"
        },
        "accountId": {
          "type": "string"
        },
        "apiKey": {
          "type": "string"
        },
        "state": {
          "type": "string",
          "enum": [
            "ACTIVE",
            "DELETED"
          ]
        }
      },
      "required": [
        "keyId",
        "roleId",
        "environmentId",
        "accountId",
        "apiKey",
        "state"
      ],
      "additionalProperties": false
    },
    "ListApiKeysResponse": {
      "type": "object",
      "properties": {
        "apiKeys": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "keyId": {
                "type": "string"
              },
              "environmentId": {
                "type": "string"
              }
            },
            "required": [
              "keyId",
              "environmentId"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "apiKeys"
      ],
      "additionalProperties": false
    },
    "DescribeApiKeyResponse": {
      "type": "object",
      "properties": {
        "keyId": {
          "type": "string"
        },
        "roleId": {
          "$ref": "#/components/schemas/RoleId"
        },
        "environmentId": {
          "type": "string"
        },
        "accountId": {
          "type": "string"
        },
        "state": {
          "type": "string",
          "enum": [
            "ACTIVE",
            "DELETED"
          ]
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "keyId",
        "roleId",
        "environmentId",
        "accountId",
        "state"
      ],
      "additionalProperties": false
    },
    "DeleteApiKeyResponse": {
      "type": "object",
      "properties": {
        "result": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "ok": {
                  "type": "boolean"
                }
              },
              "required": [
                "ok"
              ],
              "additionalProperties": false
            },
            {
              "type": "string"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "GetEnvironmentLogsResponse": {
      "type": "object",
      "properties": {
        "lines": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "unixNanos": {
                "type": "string"
              },
              "line": {
                "type": "string"
              }
            },
            "required": [
              "unixNanos",
              "line"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "lines"
      ],
      "additionalProperties": false
    },
    "ListAccountSecondaryOwnersResponse": {
      "type": "object",
      "properties": {
        "secondaryOwnersUserIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "secondaryOwners": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "string"
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "userId"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "secondaryOwnersUserIds",
        "secondaryOwners"
      ],
      "additionalProperties": false
    },
    "AddAccountSecondaryOwnerResponse": {
      "type": "object",
      "properties": {
        "secondaryOwnersUserIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "secondaryOwnersUserIds"
      ],
      "additionalProperties": false
    },
    "RemoveAccountSecondaryOwnerResponse": {
      "type": "object",
      "properties": {
        "secondaryOwnersUserIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "secondaryOwnersUserIds"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}
